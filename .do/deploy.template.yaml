alerts:
- rule: DEPLOYMENT_FAILED
- rule: DOMAIN_FAILED
name: feder
services:
- dockerfile_path: Dockerfile
  envs:
  - key: DJANGO_SECRET_KEY
    scope: RUN_AND_BUILD_TIME
    type: SECRET
    value: ...
  - key: DJANGO_SERVER_EMAIL
    scope: RUN_AND_BUILD_TIME
    value: x
  - key: DATABASE_URL
    scope: RUN_AND_BUILD_TIME
    type: SECRET
    value: ...
  - key: EMAILLABS_APP_KEY
    scope: RUN_AND_BUILD_TIME
    value: x
  - key: EMAILLABS_SECRET_KEY
    scope: RUN_AND_BUILD_TIME
    type: SECRET
    value: ...
  - key: LETTER_RECEIVE_SECRET
    scope: RUN_AND_BUILD_TIME
    type: SECRET
    value: ...
  - key: AWS_S3_ACCESS_KEY_ID
    scope: RUN_AND_BUILD_TIME
    value: access-key
  - key: AWS_S3_SECRET_ACCESS_KEY
    scope: RUN_AND_BUILD_TIME
    type: SECRET
    value: secret-key
  - key: AWS_S3_ENDPOINT_URL
    scope: RUN_AND_BUILD_TIME
    value: http://minio:9000/
  - key: AWS_STORAGE_BUCKET_NAME
    scope: RUN_AND_BUILD_TIME
    value: 'feder'
  github:
    branch: do
    deploy_on_push: true
    repo: watchdogpolska/feder
  health_check:
    http_path: /
  http_port: 8000
  instance_count: 1
  instance_size_slug: basic-xxs
  name: feder
  routes:
  - path: /
  source_dir: /
# TODO: add workers
